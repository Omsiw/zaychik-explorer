# Используем актуальный и легковесный образ Node.js (LTS-версия)
FROM node:20-alpine

# Устанавливаем рабочую директорию внутри контейнера
WORKDIR /app

# Копируем файлы с зависимостями.
# Это делается отдельно для эффективного использования кэша Docker.
COPY package*.json ./

# Устанавливаем зависимости. Этот слой будет пересобираться, только
# если изменится package.json или package-lock.json.
RUN npm install

# Теперь копируем все остальные файлы вашего приложения.
# Этот слой будет пересобираться при любом изменении кода.
COPY . .

# Указываем, какой порт будет слушать приложение (стандарт для Vite)
EXPOSE 3000

# Команда по умолчанию для запуска сервера разработки.
# Ваш docker-compose.yml ее переопределяет, добавляя --host, что правильно.
CMD ["npm", "run", "dev"]